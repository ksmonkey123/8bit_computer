package ch.awae.custom8bit.microcode

import ch.awae.custom8bit.microcode.Action.*
import ch.awae.custom8bit.microcode.FlagCondition.*

val INSTRUCTION_SET = mapOf(
    "NSWP" to Op(0x00, 0x03, READ_ALU, WRITE_REGISTER),
    "SHL" to Op(0x04, 0x03, READ_ALU, WRITE_REGISTER),
    "SHR" to Op(0x08, 0x03, READ_ALU, WRITE_REGISTER),
    "CMPC" to Op(0x0c, 0x03, READ_ALU, WRITE_REGISTER),
    "DECC" to Op(0x10, 0x03, READ_ALU, WRITE_REGISTER),
    "INCC" to Op(0x14, 0x03, READ_ALU, WRITE_REGISTER),
    "ADDC" to Op(0x18, 0x03, READ_ALU, WRITE_REGISTER),
    "SUBC" to Op(0x1c, 0x03, READ_ALU, WRITE_REGISTER),
    "AND" to Op(0x24, 0x03, READ_ALU, WRITE_REGISTER),
    "IOR" to Op(0x28, 0x03, READ_ALU, WRITE_REGISTER),
    "XOR" to Op(0x2c, 0x03, READ_ALU, WRITE_REGISTER),
    "NOT" to Op(0x30, 0x03, READ_ALU, WRITE_REGISTER),
    "NAND" to Op(0x34, 0x03, READ_ALU, WRITE_REGISTER),
    "INOR" to Op(0x38, 0x03, READ_ALU, WRITE_REGISTER),
    "XNOR" to Op(0x3c, 0x03, READ_ALU, WRITE_REGISTER),
    "MOV" to Op(0x40, 0x0f, READ_REGISTER, WRITE_REGISTER),
    "LADDC" to Op(0x58, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LSUBC" to Op(0x5c, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LAND" to Op(0x64, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LIOR" to Op(0x68, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LXOR" to Op(0x6c, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LNAND" to Op(0x74, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LINOR" to Op(0x78, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "LXNOR" to Op(0x7c, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER),
    "CMP" to Op(0x8c, 0x03, READ_ALU, WRITE_REGISTER, CARRY_SET),
    "DEC" to Op(0x90, 0x03, READ_ALU, WRITE_REGISTER, CARRY_CLEAR),
    "INC" to Op(0x94, 0x03, READ_ALU, WRITE_REGISTER, CARRY_SET),
    "ADD" to Op(0x98, 0x03, READ_ALU, WRITE_REGISTER, CARRY_CLEAR),
    "SUB" to Op(0x9c, 0x03, READ_ALU, WRITE_REGISTER, CARRY_SET),
    "LOAD" to Op(0xa0, 0x03, ADDRESS_FROM_LITERAL, READ_MEMORY, WRITE_REGISTER),
    "ILOAD" to Op(0xa4, 0x03, ADDRESS_FROM_REGISTERS, READ_MEMORY, WRITE_REGISTER),
    "LLOAD" to Op(0xa8, 0x03, READ_LITERAL, WRITE_REGISTER),
    "CLR" to Op(0xac, 0x03, WRITE_REGISTER),
    "STORE" to Op(0xb0, 0x0c, ADDRESS_FROM_LITERAL, READ_REGISTER, WRITE_MEMORY),
    "ISTORE" to Op(0xb1, 0x0c, ADDRESS_FROM_REGISTERS, READ_REGISTER, WRITE_MEMORY),
    "BRCS" to Op(0xc0, IF_CARRY_SET, ADDRESS_FROM_LITERAL, BRANCH),
    "BRCC" to Op(0xc1, IF_CARRY_CLEAR, ADDRESS_FROM_LITERAL, BRANCH),
    "BRZ" to Op(0xc2, IF_ZERO_SET, ADDRESS_FROM_LITERAL, BRANCH),
    "BRNZ" to Op(0xc3, IF_ZERO_CLEAR, ADDRESS_FROM_LITERAL, BRANCH),
    "BRLZ" to Op(0xc4, IF_NEGATIVE_SET, ADDRESS_FROM_LITERAL, BRANCH),
    "BRGZ" to Op(0xc5, IF_NEGATIVE_CLEAR, IF_ZERO_CLEAR, ADDRESS_FROM_LITERAL, BRANCH),
    "BRNLZ" to Op(0xc6, IF_NEGATIVE_CLEAR, ADDRESS_FROM_LITERAL, BRANCH),
    "BRNGZ" to Op(0xc7, (IF_ZERO_SET or IF_NEGATIVE_SET), ADDRESS_FROM_LITERAL, BRANCH),
    "GOTO" to Op(0xc8, ADDRESS_FROM_LITERAL, BRANCH),
    "LADD" to Op(0xd8, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER, CARRY_SET),
    "LSUB" to Op(0xdc, 0x03, READ_ALU_WITH_LITERAL, WRITE_REGISTER, CARRY_CLEAR),
    "RGOTO" to Op(0xe8, ADDRESS_FROM_REGISTERS, BRANCH),
    "SETC 0" to Op(0xf0, CARRY_CLEAR),
    "SETC 1" to Op(0xf1, CARRY_SET),
)
